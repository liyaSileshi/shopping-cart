<!DOCTYPE html>
<html>
    <head>
        <tilte></tilte>
        <style>
        
        </style>
    </head>
    <body>
        <!-- qty -->
        <p id='qty'></p>
        <p id = 'total'></p>
        <ul id="item-list">
            <!--Cart Items -->
        </ul>

        <!-- total -->
        <script>
            const itemList = document.getElementById('item-list')
            const quantity = document.getElementById('qty')
            const totalPrice = document.getElementById('total')

            const cart = []
            // ---------------------------------------------
            // Add item
            function addItem(name, price) {
                for (let i = 0; i < cart.length; i+=1) {
                    if (cart[i].name === name){
                        cart[i].qty += 1
                        // Stop here!
                        return 
                    }   
                }
                const item = {name, price, qty:1}
                cart.push(item)
            }

            // ---------------------------------------------------------------------
            // Show items
            function showItems() {
                const qty = getQty()
               
                // console.log(`You have ${qty} items in your cart`)
                quantity.innerHTML = `<p>You have ${qty} items in your cart</p>`

                
                let itemStr = ''
                for (let i = 0; i < cart.length; i+=1) {
                    // console.log(`- ${cart[i].name} $${cart[i].price} x ${cart[i].qty}`)
                    itemStr += `<li>- ${cart[i].name} $${cart[i].price} x ${cart[i].qty} = $${cart[i].price * cart[i].qty} </li>`
                }
                itemList.innerHTML = itemStr


                const total_price = getTotalPrice()
                // console.log(`Your total price is $${total_price}`)
                totalPrice.innerHTML = `<p>Your total price is $${total_price}</p>`
            }

            // ----------------------------------------------
            // Get qty
            function getQty(){
                let qty = 0
                for (let i = 0; i < cart.length; i += 1){
                    qty += cart[i].qty
                }
                return qty
            }

            // -------------------------------------------------
            // Get total price
            function getTotalPrice(){
                let total_price = 0
                for (let i = 0; i < cart.length; i+=1) {
                    total_price += cart[i].price * cart[i].qty
                }
                return total_price.toFixed(2)
            }

            // ------------------------------------------------
            // Remove item
            function removeItemQty(name, qty = 0){
                for (let i = 0; i < cart.length; i+=1) {
                    if (cart[i].name === name){
                        if (qty > 0){
                            cart[i].qty -= qty
                        }
                        if (cart[i].qty < 1 || qty === 0) {
                            cart.splice(i ,1)
                        }
                        return
                    }
                }
            }            

            addItem('Apple', 2.99)
            addItem('Banana', 3.99)
            addItem('Apple', 2.99)
            addItem('Banana', 3.99)
            addItem('Negativity', 29.99)
            showItems()
            removeItemQty('Negativity')
            showItems()
            removeItemQty('Apple', 1)
            showItems()
        </script>
    </body>
</html>